// import { io } from "socket.io-client"

import { parseResponseBody } from "./utils"

// import fetch from "node:fetch"
const main = async () => {
  /*
  const response = await fetch(
    "http://127.0.0.1:4001/api/chat?prompt=give+me+unique+answer+of+what+is+beautiful+place+on+earth?"
  )
  const data = await response.json()
  console.log(data)
  */
  const jsonResponseStreamInput =
    ' {"type":"chat:completion","data":{"delta_content":"**The","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" Danaki","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"l Depre","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ssion i","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"n Ethio","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"pia.**","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"\\n\\nThis","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" is not a","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" place o","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"f life,","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" but of E","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"arth\'s","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" raw, pr","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"imordi","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"al crea","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"tion. I","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"t is one","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" of the h","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ottest","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":", dries","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"t, and l","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"owest p","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"laces o","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"n the pl","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"anet, a","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" geolog","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ical fu","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"rnace w","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"here th","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ree tec","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"tonic p","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"lates a","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"re tear","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ing apa","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"rt. The","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" beauty","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" here is","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" not gen","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"tle or g","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"reen; i","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"t is vio","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"lent, a","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"cidic,","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" and utt","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"erly al","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ien.","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"\\n\\nYou can","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" walk on","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" a salt p","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"lain th","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"at glit","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ters li","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ke a sha","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ttered","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" mirror","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":", forme","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"d from t","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"he evap","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"oratio","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"n of anc","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ient se","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"as. You","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" can pee","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"r into t","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"he Erta","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" Ale vol","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"cano, o","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ne of th","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"e few la","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"va lake","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"s in the","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" world,","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" a churn","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ing cau","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ldron o","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"f molte","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"n rock t","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"hat glo","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ws a ter","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"rifyin","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"g orang","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"e again","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"st the n","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ight. A","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"nd you c","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"an witn","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ess the","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" Dallol","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" hot spr","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ings, w","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"here su","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"lfurou","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"s and ac","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"idic wa","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ters pa","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"int the","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" landsc","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ape in s","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"hockin","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"g, unna","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"tural h","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ues of n","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"eon yel","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"low, em","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"erald g","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"reen, a","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"nd rust","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" red.","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"\\n\\nThe bea","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"uty of t","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"he Dana","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"kil Dep","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ressio","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"n is in i","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ts extr","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"emity.","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" It\'s a p","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"lace th","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"at feel","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"s like a","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" glimps","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"e of the","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" young E","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"arth, a","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" landsc","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ape so h","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ostile","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" and pow","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"erful i","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"t remin","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ds you t","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"hat you","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" are a fr","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"agile v","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"isitor","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" on a dyn","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"amic, l","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"iving p","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"lanet.","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":" It\'s a b","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"eautif","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"ul nigh","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"delta_content":"tmare.","phase":"answer"}}\n\ndata: {"type":"chat:completion","data":{"phase":"other","usage":{"prompt_tokens":2167,"completion_tokens":238,"total_tokens":2406,"prompt_tokens_details":{"cached_tokens":2151},"words":1051}}}\n\ndata: {"type":"chat:completion","data":{"phase":"done","done":true}}\n\n'

  const text = parseResponseBody(jsonResponseStreamInput)
  console.log(text)
}
main().catch((e) => {
  console.error(e)
  process.exit(1)
})
